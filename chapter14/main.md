# 14. You Don't Have To Guess: No-Limit Bet Sizing

- ベットサイズは分析するためには、まずベットサイズを考慮した戦略のゲームを解きます。次に、ベットサイズをコントロールできるプレイヤーが、ベットサイズの選択を通じてエクイティを最大化します。
- 一方のプレイヤーが非常に強い配分や透視能力を持っている場合、透視能力を持っているプレイヤーがどんなに小さなベットをしたとしても、もう一方のプレイヤーは単にあきらめなければならないという状況が起こりえます。
- 情報隠蔽は、異なるベットサイズが利用可能な場合に特に重要です。

---

ノーリミットベットのサイジングは重要なトピックですが、分析の観点からは一般的に軽視されてきました。既存の文献には、ポットサイズのベットから、少額のアンダーベット、ハンドの強さに応じたベット額の違いなど、様々な推奨が見られます。これらの推奨は通常、経験とコンセンサスの組み合わせに基づいています。しかし、分析的な答えが見つかる場合もあります。

まず、ハーフストリート・ノーリミットの透視ゲームを考えてみましょう。以前透視ゲームを見たとき、それはリミットベッティングであり、透視能力プレイヤーは、相手プレイヤーがコールすることに無関心であるように、自分の勝っているハンドの全てと負けているハンドの何分の一かをBetしました。しかし、ノーリミットでは、選べるベットサイズが多数あります。あるベットサイズが他のベットサイズより優れている理由は何でしょうか？このようなゲームで最適な戦略を見つけるにはどうすればいいのでしょうか？

## Ex.14.1 Half Street No Limit Clairvoyance Game

- 1回のハーフストリートである
- ポットサイズは $1$ である
- ノーリミットベット(スタックは $n$ で、 $n$ は大きい)
- Yは透視能力者であり、Yのハンドは50%がナッツハンドで50%がブラフハンドである分布からランダムに選ばれる

注: リミットゲームでは、ベットサイズは $1$ 、ポットは $P$ という慣例を用います。しかし、ベットサイズが可変のノーリミットゲームでは、代わりに、ポットは $1$ 、ベットは $n$ という慣例を使います。

まず、この戦略の構造を説明します。Xがチェックインザダークをした後、YはナッツハンドをBetしてバリューを取りに行き、XがCallしてもかまわないようなブラフでそのバリューハンドの価値を守ります。Yは両方のタイプのハンドでBetするベットサイズ $s$ を選びます。Yが2つの異なる金額をベットする場合、このような戦略が最適であるためには、その2つのベットサイズで宿敵に対する期待値が等しくなることが必要です。そうすると、XはYがブラフに無関心になるような割合でCallすることになります。

あるベット額をベットしたときのYの期待値である関数 $f(s)$ を作ることができます。そして、この関数が最大になる場所を見つければ、Yの適切なベットサイズを見つけることができ、ゲームの解が得られます。Yが適切なベットとブラフをした場合、Xは自分の判断でFoldすることもCallすることもできます。したがって、Yの期待値を求めるには、Yの戦略を一定に保つ限り、XはどんなBetでもCallすると仮定すればよいです。この考え方は、第III部の後半で\[0,1\]Gameを見るときにもっと使うことになります。

[Chapter11](chapter11/main.md)で解いたゲームから、Yのベットに対するブラフの頻度が $\alpha$ になること、また、Xがブラフに勝っているハンドのうち $\alpha$ をフォールドする(コール頻度は $1 - \alpha$ )ことが分かっています。式11.2から、ノーリミットゲームでは、 $\alpha$ の定義は以下です。

$\alpha = \dfrac{s}{1 + s}$

どのようなベット値 $s$ でも、Yはバリューベットしたのと同数のハンドを $\frac{s}{1 + s}$ の頻度でブラフします。Yの全ハンドのうちバリューハンドの割合を $y$ とします。

$f(s) = p(Y\ has\ nuts)(one\ bet) + p(Y\ bluffs)(lose\ one\ bet)$  
$f(s) = ys + \dfrac{ys}{1 + s} \cdot (-s)$  
$f(s) = ys - \dfrac{ys^2}{1 + s}$  
$f(s) = \dfrac{ys}{1 + s}$

この関数は、次のグラフに見られるように、局所的な極大値や極小値を持ちません。

- X calling fraction: $x_{call}(s) = \dfrac{s}{1 + s}$
- Y bluffing fraction: $y_{bluff}(s) = \dfrac{s}{2(1 + s)}$

![the-half-street-clairvoyance-game-y0.5](/resources/img/chapter14/the-half-street-clairvoyance-game-y0.5.png)

実際、この関数は $s$ が無限大になるにつれて増加し続けます。したがって，Yは自分のスタック全てをベットし、適切な対応関数を用いてブラフを行うことで、自分の期待値を最大化します。上記では、Yのレンジが50%のナッツハンドと50%のブラフハンドであると仮定しました。しかし、 $y$ が $\frac35$ だとすると、Yのハンドの $\frac35$ がナッツハンドで $\frac25$ がブラフであり、スタックはちょうど5ポットサイズです。ここでYはAll Inしました。Xはどう対応すべきでしょうか？Yが単純にポットをBetした場合、あるいは $s = 1$ の場合、Xはどう対応すべきでしょうか？

まず最初の質問から考えてみましょう。さて、上記の推論に基づく即座に出せる答えは、Xは $\alpha = \frac5{1 + 5} = \frac56$ のハンドをフォールドし、残りのハンドでコールすべきというものです。これでYはブラフに無関心になります。しかし、実はこれは間違っていて、この理由を探るために今議論している戦略のペアを考えてみましょう。

Y: すべてのナッツハンドとすべてのデッドハンドで5点のベットする  
X: ハンドの $\frac16$ でコールする

ブラフの場合、Yは $\frac56$ の確率でポット $1$ を獲得し、合計 $\frac56$ 勝ちますが、 $\frac16$ の確率で $s = 5$ のベットを失い、 $\frac56$ の損失となります。一方、バリューベットの場合、Yは $\frac16$ の確率で $5$ 点勝ち、バリューベット1回につき $\frac56$ ユニットの利益を得ます。バリューベットはハンド全体の $\frac35$ を占めるので、これは合計 $\frac12$ 点の勝ちとなります。

しかし、XがいつもFoldしていたらどうでしょうか？そうすると、Yはハンド全体の $\frac25$ を占めるブラフでポット全体を勝ち取ることになり、それ以外は何も得られません。つまり、Yのエクイティはポットの $\frac25$ にしかなりません。これらが最適な戦略であるはずがありません。XはすべてのハンドをFoldするだけで一方的に改善することができます。Yは自分のハンドをすべてブラフにすることで、これを利用することができます。Yがそうしたとします。このYの戦略に対して、Xの最善の対応は単純にFoldすることです。

これは重要な結果です。この状況でのXの最適戦略は、たとえYが自分のデッドハンドをすべてブラフしていたとしても、自分のハンドをすべてフォールドすることです。これは、Yのレンジが非常に強力であるため、Yは単純にベットし、すべてのハンドでポットを「要求」することができるからです。このような状況については、マルチストリートプレイの章で詳しく述べます。ゲームグラフとエクイティグラフを以下に示します。

![half-street-no-limit-clairvoyance-game-y0.6](/resources/img/chapter14/half-street-no-limit-clairvoyance-game-y0.6.png)

YがAll Inせず、単純にPot betしたとしましょう( $s = 1$ )。上のグラフの $s = 1$ の場合を見て、単純にハンドの半分でコールすればいいように思えるかもしれません。そうすれば、Yは $s = 1$ という値のブラフに無関心になりそうです。残念ながら、それほど単純ではありません。正解は、XはやはりすべてのハンドをFoldすることになります。これは、Yがポットの $s = 0.01$ をベットしていたとしても同じです。

その理由を知るために、YがXのCallをどのように利用するかを考えてみましょう。YがAll Inした場合、Xは自分のハンドをすべてFoldすることがわかっています。ここで、Xが少ないベットに対して、何らかの混合戦略でCallするとします。Yは、勝っているハンドで少ない額をベットし、ブラフでAll Inするという戦略を採用することで、これを利用することができます。Xもそれを利用することができますが、YはXの戦略に対してエクイティを増やすことができるため、最適とは言えません。別の見方をすれば、YはすべてのハンドでAll Inし、ポットを要求することができます。Xは、Yの最適な戦略に対してプレイしても、闇雲にハンドを捨てるのと変わりません。したがって、Xは常にFoldすることで最適なプレイをすることができます！

[Chapter13](chapter13/main.md)では、リミットハーフストリートAKQゲームを考えました。そこでは、ベットサイズに対して固定ポットがあれば、ゲームを解くことができ、両プレイヤーにとって適切なベットとブラフの頻度を見つけることができることを発見しました。このゲームのノーリミット版を考えることで、ノーリミットのベットサイズの検討を続けます。

## Ex.14.2 AKQ Game #3

- ハーフストリート
- ポットサイズは $1$
- ノーリミットベット(スタックは $n$ 。 $n$ は非常に大きい)

このゲームでは、前回と同じ状況です。Xは必ずチェックをし、Yはハンドレンジからできるだけ多くのバリューを取ろうとします。しかし、「ベットかチェックか」という二者択一の判断ではなく、Yはより複雑な判断に迫られています。ベットすると決めた場合、ベット額も選ばなければなりません。実際、「チェック」とは、単純に $0$ をベットすることだと考えることができます。

一見して、Yがポット以上にベットするのは愚かなことだとわかります。もしそうすれば、XはAだけでブラフをキャッチし、KでCallすることはありません。そうすれば、YがAを持っているときに損をすることはなく、YがQをブラフしたときにポット以上の利益を得ることができます。Yがポットより小さい額をベットすることで利益を得ることができることは、以前にリミットゲームを解いてわかっています。したがって、ポットオーバーのベット額は捨てることができます。

次に、もしブラフとは違う金額をバリューベットしたらどうなるか考えてみましょう。Xはバリューベットに対してKをFoldし、ブラフベットにCallするだけです。私たちが利用するバリューベット額ごとに、対応するブラフを用意し、バリューベットに対するブラフの比率( $\alpha$ )がそのベット額で保たれるようにしなければなりません。ここで重要なもう一つの考え方は、ある別のベット額 $t$ をベットするよりも利益が多くなるようなベット額 $s$ がある場合、前者は最適戦略にはならないということです。 $t$ をベットしたハンドをすべて $s$ のベットに切り替えて、エクイティを向上させればよいのです。これは、次のいずれかを意味します。

1. 複数のベット額が同じエクイティになる
2. Yの最適戦略ではベット額は1つになる

これらの事実を考慮した上で、最適戦略を以下のように計算できます。まず、任意のベット額 $s$ に対して最適なブラフとコールの頻度を求めます。これらは、XがYのベット $j$ に最良の反応を示すアクション頻度であり、Yが $s$ をベットする際の適切なブラフ頻度です。これらの頻度を使用して、ゲームの期待値を $s$ の関数として解くことができます。これを行った後、Yのエクイティが最大化される値を見つけることができます。Yはその特定の値でベットし、ブラフを選択します。Xはこれを防ぐ手段を持っていません。

これは、さまざまな戦略選択が可能なゲームを考えるときによく使う手法です。時には、あるプレイヤーだけがコントロールする変数の観点から、ゲームまたはその一部を解くことができます。このような場合、戦略を見つけ、期待値を計算し、その変数をコントロールするプレイヤーが、この期待値が最大になるような値を選択することができます。

ここでも、[Chapter11](chapter11/main.md)で解いたゲームから、Yのブラフとベットの比率は $\alpha$ になり、また、Xはブラフキャッチハンドのうち $\alpha$ をFoldすることがわかっています(式11.2参照)。

したがって、どのようなベット額 $s$ であっても、YがQを持っているとき、Yは $\frac{s}{1 + s}$ の確率でブラフをすることになります。同様に、Xは $\frac{s}{1 + s}$ でFoldします。

これらの頻度に基づき、どのベットサイズ $s$ でも、ベットとブラフの期待値を計算することができます。

XはYがブラフとCheckのどちらかを選ぶのに無関心になるような頻度でCallし、チェックのEVは $0$ であるため、Yがブラフで収支が合う(期待値が $0$ になる)ことは、これまでの経験からわかっています。バリューベットでは、Yは最初のプレイヤーがKでコールしたときに価値を得ます。

Xは全体として $1 - \alpha$ 、つまり $\frac1{1 + s}$ の頻度でCallしなければなりません。Xが常にCallするAについて、この式から $\frac12$ を引きます。

$c_K = 2(\dfrac1{1 + s} - \dfrac12)$  
$c_K = \dfrac2{1 + s} - \dfrac{1 + s}{1 + s}$  
$c_K = \dfrac{1 - s}{1 + s}$

XがCallするKの割合は $\frac{1 - s}{1 + s}$ であることがわかります。Xがコールした場合、Yの利得は $s$ となります。つまり、YがA、XがKの場合、Yは $\frac{1 - s}{1 + s}$ を獲得します。このケースはハンド全体の $\frac16$ に相当するので、Yにとってのゲームの期待値の合計は、

$f(s) = \dfrac{s(1 - s)}{6(1 + s)}$

ここでYは、上の式が最大になるように $s$ を選びます。これを行うには微分が必要ですが、その前に、次のグラフを見れば、極大値がどこになるかがだいたいわかります。

![equity-of-the-nl-clairvoyance-game](/resources/img/chapter14/equity-of-the-nl-clairvoyance-game.png)

この式の導関数が0となる $s$ を求めます。

$f(s) = \dfrac{s(1 - s)}{1 + s}$

$f'(s) = \dfrac{-(s^2 + 2s-1)}{(1 + s)^2}$

$s^2+ 2s - 1 = 0$  
$(1+s)^2 = 2$  
$s = -1 ± \sqrt{2}$

負の数をベットすることはできないので、 $-1 - \sqrt{2}$ は除外します。

つまり、 $\sqrt{2} - 1$ 、つまり約 $0.414$ が適切なベット額ということになります。

デイビッド・スクランスキーは、著書『ポーカーの理論』の中で、「ポーカーの基本定理」という言葉を用いています。これは、代数学の基本定理と微積分学の基本定理をもじったものです。定数 $\sqrt{2} - 1$ はポーカー分析に頻繁に登場するので、同じ意味で**ポーカーの黄金比**と呼ぶことにします。この値は、本書を通じて、多くの重要な結果で目にすることになります。

$r = \sqrt{2} - 1$ (14.1)

このゲームの解は、ノーリミットの適切なベット額を見つける最初の例です。この重要な概念は、すべての異なるベット額についてゲームの期待値を求めることができるという考えに基づいています。これができれば、ベッターの期待値が最大になるようなベット額を見つけることができます。

つまり、次のような条件のゲームです。

- ナッツを持っているときと、ブラフを持っているときがある
- あなたがブラフを持っているとき、相手は半分の確率でナッツを持っており、残りの半分はブラフにしか勝てない手札を持っている

最適な戦略は、あなたがすべてのナッツハンドでポットの $\sqrt{2} - 1$ 倍(41%強)をベットし、それに対応するブラフ頻度 $1 - \dfrac{1}{\sqrt{2}}$ でブラフをすることです。相手はナッツハンドとそのマージナルハンドでCallし、合計のコール頻度が $\dfrac{1}{\sqrt{2}}$ になるようにします。

AKQゲームのような離散的なゲームに加えて、より複雑なノーリミットゲームを解くために同様のアイデアを使用することができます。\[0,1\]Gameのような連続ゲームもノーリミットでプレイできます。AKOゲームでは、Yが使用する最適なベットサイズが1つだけあることがわかりました。しかし、Half Street \[0,1\]Gameでは、時折すべての異なるベットサイズをベットすることがわかりました。

## Ex.14.3 \[0,1\]Game \#3

- ハーフストリート
- ベッティングはノーリミットで、両プレイヤーとも任意に大きなスタックを持つ
- ポットは $1$
- Fold可能

ここでは、Xがチェックインザダークをし、Yがエクイティを最大化しようとする、今までと似たようなゲームです。しかし、ハンドの強さとベットの大きさという2つの変数が関連する状況になっています。リミットのAKQゲームでは、YがQを持っていた場合、ベットかチェックかという単純な二者択一の選択でした。ノーリミットの場合、Yはさらにベット額を選択しなければなりませんでした。

Half Street \[0,1\] No-Limit Gameでは、Yはハンドごとにベット額を選択しなければなりません。特定の額をベットすることもあれば、ハンドの強さに応じてベット額を変えることもあります。前のゲームと同じように、変数の観点からゲームを解き、各プレイヤーに、自分のエクイティを最大にするために自分がコントロールする変数を選択させることを試みます。

したがって、XがYから $t$ のベットを受けたとき、Yのブラフ閾値ギリギリでYがブラフに無関心になるようにコールする必要があります。

$t$ のベットに直面したときのXのコールの閾値を $x(t)$ とすると、 $x(t)$ は、Yのブラフに勝てるハンドのみで構成されます。Xが決してコールしない閾値は $x(0)$ です。この値を $x_0$ とします。

Xは、Yのハンドが $x_0$ より弱い場合、Yが $s$ のブラフをすることに無関心になるような関数 $x(s)$ をびます。言い換えれば、Xは、Yが $s$ をベットするか、 $s$ の値に対してチェックをするかで無関心になるだけのハンドで、 $s$ の大きさのベットをコールします。つまり、 $s_1$ 、 $s_2$ 、 $s_3$ などはすべてチェックと等しいエクイティを持ちます。したがって、Yはどの $s$ の値でもベットすることに無関心です。

このことから、Yの $y$ における無関心は次のようになります。

|Xのハンド|Yがベット|Yがチェック|
|:--|:--|:--|
|$[0, x(s)]$|$-s$|$0$|
|$[x(s), y]$|$1$|$0$|

$y - x(s) - sx(s) = k$ (ここで$k$は定数)  
$x(s) = \dfrac{y - k}{1 + s}$

$x(0)=x_0$ であるので、 $y - k = x_0$ であり、

$x(s) = \dfrac{x_0}{1 + s}$ **(14.2)**

まとめると、上の式は、Xがチェックした後、Yがいくらかの額 $s$ をベットすれば、Xは $\dfrac{x_0}{1 + s}$ より良いハンドでCallすることを意味します。この時点では、 $x_0$ の値がいくらかはわからりませんが、Yがいくらベットしても、Xがそれより悪いハンドでCallすることはないということだけはわかります。この値については後で解くことにします。

次にYの戦略に目を向けます。

同じように、Yのバリューベット戦略は、Yが特定の $s$ をベットすべきハンドの価値を返すベット額である $s$ の関数になります。

Yが特定のハンド値 $y$ でバリューのために $s$ をベットする場合、Xが $y$ より良いハンドを持っているときは $s$ を失い(これは確率 $y$ で起こる)、Xが $x$ のコール閾値 $x(s)$ よりも良いが $y$ よりも悪いハンドを持っているときは $s$ を獲得します。そうすると、Yのエクイティは、

$\langle Y \rangle = (chance\ that\ Y\ gets\ called\ and\ loses)(-s) + (chance\ that\ Y\ gets\ called\ and\ wins)(s)$  
$\langle Y \rangle = y(-s) + (x(s) - y)s$  
$\langle Y \rangle = sx(s) - 2sy$

再び微積分を使えば、最大値を求められます。

$sx^2(s) + x(s) - 2y = 0$  
$s(\dfrac{-x_0}{(1 + s)^2}) + \dfrac{x_0}{1 + s} - 2y = 0$  
$\dfrac{x_0}{(1 + s)^2} - 2y = 0$  

$y(s) = \dfrac{x_0}{2(1 + s)^2}$

これがYのバリューベット戦略です。Yの戦略は、Yの値ごとに異なる金額をベットします。情報隠蔽の原則に従えば、これはYの手の内を知らしめることになるので、通常はとんでもない間違いです。しかし、この特別なゲームでは、Xはこの情報を悪用することはできず、Yはすべての値のベットに適切な比率で対応するブラフを合わせることがわかりました。 $s$ のベットに直面したとき、Xは自信を持ってCallするか(自分がナッツハンドを持っていることを知っている場合)、不確実性を持ってCallするか(Yが打ち負かせるブラフを持っているか、打ち負かせないバリューベットを持っているかを知っている場合)、あるいはFoldすることができます。XはRaiseできないので、Yは自分のハンドの強さを制限することによって有益な情報を与えることはありません。

さて、次の部分「ブラフ領域とバリューベット領域のマッチング」は少し厄介です。ここまでの内容を理解していれば、次のセクションは飛ばしても構いません。ここまででやったことは、このゲームの戦略が次のようになることを示すことです。

$[0, x(0)]$ において、Xは関数 $x(s)$ でCallします。 $[x(0),1] $では、XはFoldします。

$[0,y(0)]$ では、Yは関数 $y(s)$ でベットします。 $[y(0),y'(0)]$ でYはビハインドチェックします。さらに悪いハンドでは、Yは $y'(s)$ に従ってブラフをします。

以下では、 $x_0$ の値を解き、Yのベット領域とブラフ領域の関係を示します。

既知のベット関数があります。

$y(s) = \dfrac{x_0} {2(1 + s)^2}$

そして、バリューベットの微分を構築することができます。事実上、この関数に沿った極少量の大きさです。直感的には、これは、ある特定の金額をベットする領域の大きさと考えることができます。 $dy $は、 $s$ の $ds$ の極小量ごとのYの極小量です。

$dy = \dfrac{x_0}{(1 + s)^2}ds$

この差分には、おなじみのブラフ比率である $\frac{s}{1 + s}$ が適用されることがわかります。

つまりブラフの微分です。

$\dfrac{sx_0}{(1+s)^4}ds$

ブラフ領域のサイズは次のようになります。

$\displaystyle \int^{\infty}_{0}\dfrac{sx_0}{(1 + s)^4}ds$

$t = 1 + s$を代入すると次のようになります。

$\displaystyle x_0\int^{\infty}_{1}\dfrac{t - 1}{t^4}dt = \dfrac{1}{6}x_0$

したがって、ブラフ領域の合計サイズは $\frac{1}{6}x_0$ となります。ブラフ領域は $x_0$ の直後から始まるので、次のようになります。

$x_0 + \frac{1}{6}x_0 = 1$  
$x_0 = \frac{7}{6}$

上記のテクニックを使えば、同様にブラフ領域をYのバリューベット領域にマッピングすることができます。代わりに、戻って戦略関数を記述しましょう( $s$ の関数としてのYのブラフ戦略は省略されていますが、Yはハンドの合計の $\frac17$ でいくらかの量 $s$ をブラフします)。

$x(s) = \dfrac{6}{7(1 + s)}$  
$y(s) = \dfrac{3}{7(1 + s)^2}$

しかし、ここで重要なのは、特定の戦略そのものではなく、最適なベットサイズを見つけるためのテクニックです。これら2つのハーフストリートゲーム(AKQ Gameと\[0,1\] Game)ではそれぞれ、一方的な戦略の選択(この場合、Yが行うベットのサイズ)の代わりに変数を用いてゲームを解きます。そして、変数をコントロールするプレイヤーは、自分の期待値が最大になるようにその値を選択します。

私たちは、ハーフストリートゲームから多くの有益な教訓を学ぶことができます。過去4章にわたって、私たちはさまざまなゲームを調査してきました。

- ベットとブラフの比率を説明した透視ゲーム
- \[0,1\]Game#1は、戦略領域と閾値の概念を導入した
- \[0,1\]Game#2は、分布が連続的で対称的な場合のベットとブラフの比率の適用を示した
- \[0,1]Push or Fold Gameでは、ショーダウンの結果がいかに不確実であるかが、プリフロップのPush or Foldをいかにルースにするかを示した
- Push or Fold No-Limit Gameは、ある重要なゲームに対する現実的な解決策である
- AKQ Limit Gameは、ベットとブラフの比率を再び示し、カード除去のアイデアを紹介した
- AKQ No-Limit Gameでは、最適なベットサイズを計算した
- \[0,1\]Gameでは、連続分布から発生する、より複雑なベット関数を示した
